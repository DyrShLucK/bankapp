apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: front-service-monitor # Уникальное имя для объекта ServiceMonitor
  namespace: monitoring-dev # Пространство имен, где находится Prometheus и где будет создан этот ServiceMonitor
  # annotations:
  #   # При необходимости можно добавить аннотации
  # labels:
  #   # При необходимости можно добавить лейблы для организации
spec:
  # Указывает, в каких namespace'ах искать Service/Pod'ы
  namespaceSelector:
    matchNames:
      - bankapp-dev # Пространство имен, где находится ваш front-service
  # Селектор для поиска Service, endpoints которого нужно мониторить
  selector:
    matchLabels:
      app.kubernetes.io/name: front-service   # <-- Соответствует лейблу Service
      app.kubernetes.io/instance: bankapp-dev # <-- Соответствует лейблу Service
  # Конфигурация endpoints для сбора метрик
  endpoints:
    - port: http # Имя порта в Service (и, соответственно, на Pod'ах). Убедитесь, что в service.yaml это так.
      path: /actuator/prometheus # Путь до эндпоинта метрик в вашем приложении
      interval: 15s # Интервал сбора
      # scrapeTimeout: 10s # При необходимости можно задать таймаут (обычно чуть меньше interval)